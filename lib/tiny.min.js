!function(t){function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var e={};i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=21)}([function(t,i){Tiny.CanvasRenderer=function(t,i,e){e=e||{},this.resolution=void 0!=e.resolution?e.resolution:1,this.clearBeforeRender=void 0==e.clearBeforeRender||e.clearBeforeRender,this.transparent=void 0!=e.transparent&&e.transparent,this.autoResize=e.autoResize||!1,this.width=t||800,this.height=i||600,this.width*=this.resolution,this.height*=this.resolution,this.view=e.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new Tiny.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:0,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,i),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=Tiny.blendModes.NORMAL,this.context.globalCompositeOperation=Tiny.blendModesCanvas[Tiny.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},Tiny.CanvasRenderer.prototype.resize=function(t,i){this.width=t*this.resolution,this.height=i*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},Tiny.CanvasRenderer.prototype.renderDisplayObject=function(t,i){this.renderSession.context=i||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},Tiny.CanvasRenderer.prototype.mapBlendModes=function(){Tiny.blendModesCanvas||(Tiny.blendModesCanvas=[],Tiny.blendModesCanvas[Tiny.blendModes.NORMAL]="source-over")}},function(t,i,e){var n=e(23),s=e(27),r=e(26),h=e(24),o=function(t,i,e,a,c){this.eventListeners={click:[]},this.parentNode=e||document.body,this.canvas=document.createElement("canvas"),this.height=i||720,this.width=t||430,this.stage=new o.Stage,this.textures={},this.renderer=new o.CanvasRenderer(t,i,{view:this.canvas,autoResize:!0}),c=c||{},this._preload_cb=c.preload||function(){},this._create_cb=c.create||function(){},this._update_cb=c.update||function(){},this.load=new n(this),this.add=new h(this),this.input=new s(this),this.addCanvasToDom(),this.resize(window.innerWidth,window.innerHeight),this._self_raf=a,this._self_raf&&(this._raf=new r(this)),this.preload()};o.prototype.addCanvasToDom=function(){this.parentNode.appendChild(this.canvas),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.transformOrigin="0% 0%",this.canvas.style.perspective="1000px"},o.prototype.resize=function(t,i){this.renderer.resize(t,i)},o.prototype.render=function(){this.renderer.render(this.stage)},o.prototype.preload=function(){this._preload_cb(),this.load.start(this.create)},o.prototype.create=function(){this._create_cb(),this._self_raf&&this._raf.start()};var a=0,c=0;o.prototype.update=function(t){c=t-a,this._update_cb(t,c),o._tween_enabled&&TWEEN.update(),this.stage.updateTransform(),this.render(),a=t},o.prototype.pause=function(){this._self_raf&&(this._raf.isRunning=!1)},o.prototype.resume=function(){this._self_raf&&(this._raf.isRunning=!0)},o.prototype.destroy=function(){o._tween_enabled&&TWEEN.removeAll(),this._self_raf&&this._raf.stop()},o.prototype.addEventListener=function(t,i,e){this.eventListeners[t].push({callback:i,displayObject:e})},t.exports=o,window.Tiny=o},function(t,i){Tiny.CanvasGraphics=function(){},Tiny.CanvasGraphics.renderGraphics=function(t,i){var e=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],r=s.shape,h=s._fillTint,o=s._lineTint;if(i.lineWidth=s.lineWidth,s.type===Tiny.Primitives.POLY){i.beginPath();var a=r.points;i.moveTo(a[0],a[1]);for(var c=1;c<a.length/2;c++)i.lineTo(a[2*c],a[2*c+1]);r.closed&&i.lineTo(a[0],a[1]),a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|o).toString(16)).substr(-6),i.stroke())}else if(s.type===Tiny.Primitives.RECT)(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fillRect(r.x,r.y,r.width,r.height)),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|o).toString(16)).substr(-6),i.strokeRect(r.x,r.y,r.width,r.height));else if(s.type===Tiny.Primitives.CIRC)i.beginPath(),i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|o).toString(16)).substr(-6),i.stroke());else if(s.type===Tiny.Primitives.ELIP){var l=2*r.width,u=2*r.height,d=r.x-l/2,p=r.y-u/2;i.beginPath();var y=l/2*.5522848,f=u/2*.5522848,T=d+l,g=p+u,x=d+l/2,m=p+u/2;i.moveTo(d,m),i.bezierCurveTo(d,m-f,x-y,p,x,p),i.bezierCurveTo(x+y,p,T,m-f,T,m),i.bezierCurveTo(T,m+f,x+y,g,x,g),i.bezierCurveTo(x-y,g,d,m+f,d,m),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|o).toString(16)).substr(-6),i.stroke())}else if(s.type===Tiny.Primitives.RREC){var v=r.x,w=r.y,b=r.width,_=r.height,C=r.radius,P=Math.min(b,_)/2|0;C=C>P?P:C,i.beginPath(),i.moveTo(v,w+C),i.lineTo(v,w+_-C),i.quadraticCurveTo(v,w+_,v+C,w+_),i.lineTo(v+b-C,w+_),i.quadraticCurveTo(v+b,w+_,v+b,w+_-C),i.lineTo(v+b,w+C),i.quadraticCurveTo(v+b,w,v+b-C,w),i.lineTo(v+C,w),i.quadraticCurveTo(v,w,v,w+C),i.closePath(),(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|o).toString(16)).substr(-6),i.stroke())}}},Tiny.CanvasGraphics.renderGraphicsMask=function(t,i){var e=t.graphicsData.length;if(0!==e){i.beginPath();for(var n=0;n<e;n++){var s=t.graphicsData[n],r=s.shape;if(s.type===Tiny.Primitives.POLY){var h=r.points;i.moveTo(h[0],h[1]);for(var o=1;o<h.length/2;o++)i.lineTo(h[2*o],h[2*o+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&i.closePath()}else if(s.type===Tiny.Primitives.RECT)i.rect(r.x,r.y,r.width,r.height),i.closePath();else if(s.type===Tiny.Primitives.CIRC)i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath();else if(s.type===Tiny.Primitives.ELIP){var a=2*r.width,c=2*r.height,l=r.x-a/2,u=r.y-c/2,d=a/2*.5522848,p=c/2*.5522848,y=l+a,f=u+c,T=l+a/2,g=u+c/2;i.moveTo(l,g),i.bezierCurveTo(l,g-p,T-d,u,T,u),i.bezierCurveTo(T+d,u,y,g-p,y,g),i.bezierCurveTo(y,g+p,T+d,f,T,f),i.bezierCurveTo(T-d,f,l,g+p,l,g),i.closePath()}else if(s.type===Tiny.Primitives.RREC){var x=r.x,m=r.y,v=r.width,w=r.height,b=r.radius,_=Math.min(v,w)/2|0;b=b>_?_:b,i.moveTo(x,m+b),i.lineTo(x,m+w-b),i.quadraticCurveTo(x,m+w,x+b,m+w),i.lineTo(x+v-b,m+w),i.quadraticCurveTo(x+v,m+w,x+v,m+w-b),i.lineTo(x+v,m+b),i.quadraticCurveTo(x+v,m,x+v-b,m),i.lineTo(x+b,m),i.quadraticCurveTo(x,m,x,m+b),i.closePath()}}}},Tiny.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var i=(t.tint>>16&255)/255,e=(t.tint>>8&255)/255,n=(255&t.tint)/255,s=0;s<t.graphicsData.length;s++){var r=t.graphicsData[s],h=0|r.fillColor,o=0|r.lineColor;r._fillTint=((h>>16&255)/255*i*255<<16)+((h>>8&255)/255*e*255<<8)+(255&h)/255*n*255,r._lineTint=((o>>16&255)/255*i*255<<16)+((o>>8&255)/255*e*255<<8)+(255&o)/255*n*255}}},function(t,i){Tiny.DisplayObject=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.transformCallback=null,this.transformCallbackContext=null,this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},Tiny.DisplayObject.prototype.constructor=Tiny.DisplayObject,Tiny.DisplayObject.prototype.destroy=function(){if(this.children){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[]}this.transformCallback=null,this.transformCallbackContext=null,this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(Tiny.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(Tiny.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var i=[],e=0;e<t.length;e++)for(var n=t[e].passes,s=0;s<n.length;s++)i.push(n[s]);this._filterBlock={target:this,filterPasses:i}}this._filters=t}}),Object.defineProperty(Tiny.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.DisplayObject.prototype.updateTransform=function(){if(this.parent){var t,i,e,n,s,r,h=this.parent.worldTransform,o=this.worldTransform;this.rotation%Tiny.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,i=this._sr*this.scale.x,e=-this._sr*this.scale.y,n=this._cr*this.scale.y,s=this.position.x,r=this.position.y,(this.pivot.x||this.pivot.y)&&(s-=this.pivot.x*t+this.pivot.y*e,r-=this.pivot.x*i+this.pivot.y*n),o.a=t*h.a+i*h.c,o.b=t*h.b+i*h.d,o.c=e*h.a+n*h.c,o.d=e*h.b+n*h.d,o.tx=s*h.a+r*h.c+h.tx,o.ty=s*h.b+r*h.d+h.ty):(t=this.scale.x,n=this.scale.y,s=this.position.x-this.pivot.x*t,r=this.position.y-this.pivot.y*n,o.a=t*h.a,o.b=t*h.b,o.c=n*h.c,o.d=n*h.d,o.tx=s*h.a+r*h.c+h.tx,o.ty=s*h.b+r*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,o,h)}},Tiny.DisplayObject.prototype.displayObjectUpdateTransform=Tiny.DisplayObject.prototype.updateTransform,Tiny.DisplayObject.prototype.getBounds=function(t){return t=t,Tiny.EmptyRectangle},Tiny.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.DisplayObject.prototype.setStageReference=function(t){this.stage=t},Tiny.DisplayObject.prototype.preUpdate=function(){},Tiny.DisplayObject.prototype.generateTexture=function(t,i,e){var n=this.getLocalBounds(),s=new PIXI.RenderTexture(0|n.width,0|n.height,e,i,t);return Tiny.DisplayObject._tempMatrix.tx=-n.x,Tiny.DisplayObject._tempMatrix.ty=-n.y,s.render(this,Tiny.DisplayObject._tempMatrix),s},Tiny.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.DisplayObject.prototype.toLocal=function(t,i){return i&&(t=i.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},Tiny.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var i=new PIXI.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var e=this._filters;this._filters=null,this._cachedSprite.filters=e,Tiny.DisplayObject._tempMatrix.tx=-t.x,Tiny.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,Tiny.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._filters=e,this._cacheAsBitmap=!0},Tiny.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(Tiny.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}})},function(t,i){Tiny.DisplayObjectContainer=function(){Tiny.DisplayObject.call(this),this.children=[]},Tiny.DisplayObjectContainer.prototype=Object.create(Tiny.DisplayObject.prototype),Tiny.DisplayObjectContainer.prototype.constructor=Tiny.DisplayObjectContainer,Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;this.scale.x=0!==i?t/i:1,this._width=t}}),Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;this.scale.y=0!==i?t/i:1,this._height=t}}),Tiny.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},Tiny.DisplayObjectContainer.prototype.addChildAt=function(t,i){if(i>=0&&i<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(i,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length)},Tiny.DisplayObjectContainer.prototype.swapChildren=function(t,i){if(t!==i){var e=this.getChildIndex(t),n=this.getChildIndex(i);if(e<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[e]=i,this.children[n]=t}},Tiny.DisplayObjectContainer.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(-1===i)throw new Error("The supplied DisplayObject must be a child of the caller");return i},Tiny.DisplayObjectContainer.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The supplied index is out of bounds");var e=this.getChildIndex(t);this.children.splice(e,1),this.children.splice(i,0,t)},Tiny.DisplayObjectContainer.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},Tiny.DisplayObjectContainer.prototype.removeChild=function(t){var i=this.children.indexOf(t);if(-1!==i)return this.removeChildAt(i)},Tiny.DisplayObjectContainer.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return this.stage&&i.removeStageReference(),i.parent=void 0,this.children.splice(t,1),i},Tiny.DisplayObjectContainer.prototype.removeChildren=function(t,i){var e=t||0,n="number"==typeof i?i:this.children.length,s=n-e;if(s>0&&s<=n){for(var r=this.children.splice(e,s),h=0;h<r.length;h++){var o=r[h];this.stage&&o.removeStageReference(),o.parent=void 0}return r}if(0===s&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},Tiny.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateTransform()},Tiny.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=Tiny.DisplayObjectContainer.prototype.updateTransform,Tiny.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;for(var t,i,e,n=1/0,s=1/0,r=-1/0,h=-1/0,o=!1,a=0,c=this.children.length;a<c;a++){this.children[a].visible&&(o=!0,t=this.children[a].getBounds(),n=n<t.x?n:t.x,s=s<t.y?s:t.y,i=t.width+t.x,e=t.height+t.y,r=r>i?r:i,h=h>e?h:e)}if(!o)return Tiny.EmptyRectangle;var l=this._bounds;return l.x=n,l.y=s,l.width=r-n,l.height=h-s,l},Tiny.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var i=0,e=this.children.length;i<e;i++)this.children[i].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t;for(var i=0;i<this.children.length;i++)this.children[i].setStageReference(t)},Tiny.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0;t<this.children.length;t++)this.children[t].removeStageReference();this.stage=null},Tiny.DisplayObjectContainer.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var i=0;i<this.children.length;i++)this.children[i]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Stage=function(){Tiny.DisplayObjectContainer.call(this),this.worldTransform=new Tiny.Matrix,this.stage=this,this.setBackgroundColor(16777215)},Tiny.Stage.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Stage.prototype.constructor=Tiny.Stage,Tiny.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()},Tiny.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=Tiny.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i}},function(t,i){Tiny.PI_2=2*Math.PI,Tiny._UID=0,Tiny.RETINA_PREFIX="none",Tiny.Primitives={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},Tiny.blendModes={NORMAL:0},Tiny.scaleModes={DEFAULT:0},Tiny.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},Tiny.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},Tiny.CIRCLE=Tiny.Primitives.CIRC,Tiny.POLYGON=Tiny.Primitives.POLY},function(t,i){Tiny.Circle=function(t,i,e){t=t||0,i=i||0,e=e||0,this.x=t,this.y=i,this._diameter=e,this._radius=0,e>0&&(this._radius=.5*e),this.type=Tiny.Primitives.CIRC},Tiny.Circle.prototype={circumference:function(){return Math.PI*this._radius*2},getBounds:function(){return new Tiny.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(t,i,e){return this.x=t,this.y=i,this._diameter=e,this._radius=.5*e,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,i){var e=Tiny.Math.distance(this.x,this.y,t.x,t.y);return i?Math.round(e):e},clone:function(t){return void 0===t||null===t?t=new Tiny.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,i){return Tiny.Circle.contains(this,t,i)},circumferencePoint:function(t,i,e){return Tiny.Circle.circumferencePoint(this,t,i,e)},offset:function(t,i){return this.x+=t,this.y+=i,this},offsetPoint:function(t){return this.offset(t.x,t.y)},toString:function(){return"[{Tiny.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},Tiny.Circle.prototype.constructor=Tiny.Circle,Object.defineProperty(Tiny.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(Tiny.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(Tiny.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(Tiny.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(Tiny.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(Tiny.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(Tiny.Circle.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(Tiny.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){!0===t&&this.setTo(0,0,0)}}),Tiny.Circle.contains=function(t,i,e){if(t.radius>0&&i>=t.left&&i<=t.right&&e>=t.top&&e<=t.bottom){return(t.x-i)*(t.x-i)+(t.y-e)*(t.y-e)<=t.radius*t.radius}return!1},Tiny.Circle.equals=function(t,i){return t.x==i.x&&t.y==i.y&&t.diameter==i.diameter},Tiny.Circle.intersects=function(t,i){return Tiny.Math.distance(t.x,t.y,i.x,i.y)<=t.radius+i.radius},Tiny.Circle.circumferencePoint=function(t,i,e,n){return void 0===e&&(e=!1),void 0===n&&(n=new Tiny.Point),!0===e&&(i=Tiny.Math.degToRad(i)),n.x=t.x+t.radius*Math.cos(i),n.y=t.y+t.radius*Math.sin(i),n},Tiny.Circle.intersectsRectangle=function(t,i){var e=Math.abs(t.x-i.x-i.halfWidth);if(e>i.halfWidth+t.radius)return!1;var n=Math.abs(t.y-i.y-i.halfHeight);if(n>i.halfHeight+t.radius)return!1;if(e<=i.halfWidth||n<=i.halfHeight)return!0;var s=e-i.halfWidth,r=n-i.halfHeight;return s*s+r*r<=t.radius*t.radius}},function(t,i){Tiny.Math={distance:function(t,i,e,n){var s=t-e,r=i-n;return Math.sqrt(s*s+r*r)}};var e=Math.PI/180,n=180/Math.PI;Tiny.Math.degToRad=function(t){return t*e},Tiny.Math.radToDeg=function(t){return t*n}},function(t,i){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},Tiny.Matrix.prototype.apply=function(t,i){i=i||new Tiny.Point;var e=t.x,n=t.y;return i.x=this.a*e+this.c*n+this.tx,i.y=this.b*e+this.d*n+this.ty,i},Tiny.Matrix.prototype.applyInverse=function(t,i){i=i||new Tiny.Point;var e=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return i.x=this.d*e*n+-this.c*e*s+(this.ty*this.c-this.tx*this.d)*e,i.y=this.a*e*s+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,i},Tiny.Matrix.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},Tiny.Matrix.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},Tiny.Matrix.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*i-this.b*e,this.b=n*e+this.b*i,this.c=s*i-this.d*e,this.d=s*e+this.d*i,this.tx=r*i-this.ty*e,this.ty=r*e+this.ty*i,this},Tiny.Matrix.prototype.append=function(t){var i=this.a,e=this.b,n=this.c,s=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*e+t.b*s,this.c=t.c*i+t.d*n,this.d=t.c*e+t.d*s,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*e+t.ty*s+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},function(t,i){Tiny.Point=function(t,i){this.x=t||0,this.y=i||0},Tiny.Point.prototype={set:function(t,i){return this.x=t||0,this.y=i||(0!==i?this.x:0),this},setTo:function(t,i){this.set(t,i)}}},function(t,i){Tiny.Polygon=function(){this.area=0,this._points=[],arguments.length>0&&this.setTo.apply(this,arguments),this.closed=!0,this.type=Tiny.Primitives.POLY},Tiny.Polygon.prototype={toNumberArray:function(t){void 0===t&&(t=[]);for(var i=0;i<this._points.length;i++)"number"==typeof this._points[i]?(t.push(this._points[i]),t.push(this._points[i+1]),i++):(t.push(this._points[i].x),t.push(this._points[i].y));return t},flatten:function(){return this._points=this.toNumberArray(),this},clone:function(t){var i=this._points.slice();return void 0===t||null===t?t=new Tiny.Polygon(i):t.setTo(i),t},contains:function(t,i){for(var e=this._points.length,n=!1,s=-1,r=e-1;++s<e;r=s){var h=this._points[s].x,o=this._points[s].y,a=this._points[r].x,c=this._points[r].y;(o<=i&&i<c||c<=i&&i<o)&&t<(a-h)*(i-o)/(c-o)+h&&(n=!n)}return n},setTo:function(t){if(this.area=0,this._points=[],arguments.length>0){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var i=Number.MAX_VALUE,e=0,n=t.length;e<n;e++){if("number"==typeof t[e]){var s=new Tiny.Point(t[e],t[e+1]);e++}else var s=new Tiny.Point(t[e].x,t[e].y);this._points.push(s),s.y<i&&(i=s.y)}this.calculateArea(i)}return this},calculateArea:function(t){for(var i,e,n,s,r=0,h=this._points.length;r<h;r++)i=this._points[r],e=r===h-1?this._points[0]:this._points[r+1],n=(i.y-t+(e.y-t))/2,s=i.x-e.x,this.area+=n*s;return this.area}},Tiny.Polygon.prototype.constructor=Tiny.Polygon,Object.defineProperty(Tiny.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){null!=t?this.setTo(t):this.setTo()}})},function(t,i){Tiny.Rectangle=function(t,i,e,n){t=t||0,i=i||0,e=e||0,n=n||0,this.x=t,this.y=i,this.width=e,this.height=n,this.type=Tiny.Primitives.RECT},Tiny.Rectangle.prototype={offset:function(t,i){return this.x+=t,this.y+=i,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},scale:function(t,i){return void 0===i&&(i=t),this.width*=t,this.height*=i,this},centerOn:function(t,i){return this.centerX=t,this.centerY=i,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,i){return Tiny.Rectangle.inflate(this,t,i)},size:function(t){return Tiny.Rectangle.size(this,t)},clone:function(t){return Tiny.Rectangle.clone(this,t)},contains:function(t,i){return Tiny.Rectangle.contains(this,t,i)},containsRect:function(t){return Tiny.Rectangle.containsRect(t,this)},equals:function(t){return Tiny.Rectangle.equals(this,t)},intersection:function(t,i){return Tiny.Rectangle.intersection(this,t,i)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)},intersectsRaw:function(t,i,e,n,s){return Tiny.Rectangle.intersectsRaw(this,t,i,e,n,s)},union:function(t,i){return Tiny.Rectangle.union(this,t,i)},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(Tiny.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(Tiny.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"bottomRight",{get:function(){return new Tiny.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(Tiny.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(Tiny.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(Tiny.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(Tiny.Rectangle.prototype,"topLeft",{get:function(){return new Tiny.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"topRight",{get:function(){return new Tiny.Point(this.x+this.width,this.y)},set:function(t){this.right=t.x,this.y=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){!0===t&&this.setTo(0,0,0,0)}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.inflate=function(t,i,e){return t.x-=i,t.width+=2*i,t.y-=e,t.height+=2*e,t},Tiny.Rectangle.inflatePoint=function(t,i){return Tiny.Rectangle.inflate(t,i.x,i.y)},Tiny.Rectangle.size=function(t,i){return void 0===i||null===i?i=new Tiny.Point(t.width,t.height):i.setTo(t.width,t.height),i},Tiny.Rectangle.clone=function(t,i){return void 0===i||null===i?i=new Tiny.Rectangle(t.x,t.y,t.width,t.height):i.setTo(t.x,t.y,t.width,t.height),i},Tiny.Rectangle.contains=function(t,i,e){return!(t.width<=0||t.height<=0)&&(i>=t.x&&i<t.right&&e>=t.y&&e<t.bottom)},Tiny.Rectangle.containsRaw=function(t,i,e,n,s,r){return s>=t&&s<t+e&&r>=i&&r<i+n},Tiny.Rectangle.containsPoint=function(t,i){return Tiny.Rectangle.contains(t,i.x,i.y)},Tiny.Rectangle.containsRect=function(t,i){return!(t.volume>i.volume)&&(t.x>=i.x&&t.y>=i.y&&t.right<i.right&&t.bottom<i.bottom)},Tiny.Rectangle.equals=function(t,i){return t.x==i.x&&t.y==i.y&&t.width==i.width&&t.height==i.height},Tiny.Rectangle.sameDimensions=function(t,i){return t.width===i.width&&t.height===i.height},Tiny.Rectangle.intersection=function(t,i,e){return void 0===e&&(e=new Tiny.Rectangle),Tiny.Rectangle.intersects(t,i)&&(e.x=Math.max(t.x,i.x),e.y=Math.max(t.y,i.y),e.width=Math.min(t.right,i.right)-e.x,e.height=Math.min(t.bottom,i.bottom)-e.y),e},Tiny.Rectangle.intersects=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)&&!(t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)},Tiny.Rectangle.intersectsRaw=function(t,i,e,n,s,r){return void 0===r&&(r=0),!(i>t.right+r||e<t.left-r||n>t.bottom+r||s<t.top-r)},Tiny.Rectangle.union=function(t,i,e){return void 0===e&&(e=new Tiny.Rectangle),e.setTo(Math.min(t.x,i.x),Math.min(t.y,i.y),Math.max(t.right,i.right)-Math.min(t.left,i.left),Math.max(t.bottom,i.bottom)-Math.min(t.top,i.top))},Tiny.Rectangle.aabb=function(t,i){void 0===i&&(i=new Tiny.Rectangle);var e=Number.MIN_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,r=Number.MAX_VALUE;return t.forEach(function(t){t.x>e&&(e=t.x),t.x<n&&(n=t.x),t.y>s&&(s=t.y),t.y<r&&(r=t.y)}),i.setTo(n,r,e-n,s-r),i},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},function(t,i){Tiny.RoundedRectangle=function(t,i,e,n,s){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0,this.radius=s||20,this.type=Tiny.Primitives.RREC},Tiny.RoundedRectangle.prototype.clone=function(){return new Tiny.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},Tiny.RoundedRectangle.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;var e=this.x;if(t>=e&&t<=e+this.width){var n=this.y;if(i>=n&&i<=n+this.height)return!0}return!1},Tiny.RoundedRectangle.prototype.constructor=Tiny.RoundedRectangle},function(t,i){Tiny.GraphicsData=function(t,i,e,n,s,r,h){this.lineWidth=t,this.lineColor=i,this.lineAlpha=e,this._lineTint=i,this.fillColor=n,this.fillAlpha=s,this._fillTint=n,this.fill=r,this.shape=h,this.type=h.type},Tiny.GraphicsData.prototype.constructor=Tiny.GraphicsData,Tiny.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Tiny.Graphics=function(){Tiny.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=Tiny.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new Tiny.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},Tiny.Graphics.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Graphics.prototype.constructor=Tiny.Graphics,Tiny.Graphics.prototype.lineStyle=function(t,i,e){return this.lineWidth=t||0,this.lineColor=i||0,this.lineAlpha=void 0===e?1:e,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new Tiny.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},Tiny.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new Tiny.Polygon([t,i])),this},Tiny.Graphics.prototype.lineTo=function(t,i){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(t,i),this.dirty=!0,this},Tiny.Graphics.prototype.quadraticCurveTo=function(t,i,e,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s,r,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var o=h[h.length-2],a=h[h.length-1],c=0,l=1;l<=20;++l)c=l/20,s=o+(t-o)*c,r=a+(i-a)*c,h.push(s+(t+(e-t)*c-s)*c,r+(i+(n-i)*c-r)*c);return this.dirty=!0,this},Tiny.Graphics.prototype.bezierCurveTo=function(t,i,e,n,s,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var h,o,a,c,l,u=this.currentPath.shape.points,d=u[u.length-2],p=u[u.length-1],y=0,f=1;f<=20;++f)y=f/20,h=1-y,o=h*h,a=o*h,c=y*y,l=c*y,u.push(a*d+3*o*y*t+3*h*c*e+l*s,a*p+3*o*y*i+3*h*c*n+l*r);return this.dirty=!0,this},Tiny.Graphics.prototype.arcTo=function(t,i,e,n,s){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,i):this.moveTo(t,i);var r=this.currentPath.shape.points,h=r[r.length-2],o=r[r.length-1],a=o-i,c=h-t,l=n-i,u=e-t,d=Math.abs(a*u-c*l);if(d<1e-8||0===s)r[r.length-2]===t&&r[r.length-1]===i||r.push(t,i);else{var p=a*a+c*c,y=l*l+u*u,f=a*l+c*u,T=s*Math.sqrt(p)/d,g=s*Math.sqrt(y)/d,x=T*f/p,m=g*f/y,v=T*u+g*c,w=T*l+g*a,b=c*(g+x),_=a*(g+x),C=u*(T+m),P=l*(T+m),S=Math.atan2(_-w,b-v),M=Math.atan2(P-w,C-v);this.arc(v+t,w+i,s,S,M,c*l>u*a)}return this.dirty=!0,this},Tiny.Graphics.prototype.arc=function(t,i,e,n,s,r){if(n===s)return this;void 0===r&&(r=!1),!r&&s<=n?s+=2*Math.PI:r&&n<=s&&(n+=2*Math.PI);var h=r?-1*(n-s):s-n,o=40*Math.ceil(Math.abs(h)/(2*Math.PI));if(0===h)return this;var a=t+Math.cos(n)*e,c=i+Math.sin(n)*e;r&&this.filling?this.moveTo(t,i):this.moveTo(a,c);for(var l=this.currentPath.shape.points,u=h/(2*o),d=2*u,p=Math.cos(u),y=Math.sin(u),f=o-1,T=f%1/f,g=0;g<=f;g++){var x=g+T*g,m=u+n+d*x,v=Math.cos(m),w=-Math.sin(m);l.push((p*v+y*w)*e+t,(p*-w+y*v)*e+i)}return this.dirty=!0,this},Tiny.Graphics.prototype.beginFill=function(t,i){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===i?1:i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Tiny.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Tiny.Graphics.prototype.drawRect=function(t,i,e,n){return this.drawShape(new Tiny.Rectangle(t,i,e,n)),this},Tiny.Graphics.prototype.drawRoundedRect=function(t,i,e,n,s){return this.drawShape(new Tiny.RoundedRectangle(t,i,e,n,s)),this},Tiny.Graphics.prototype.drawCircle=function(t,i,e){return this.drawShape(new Tiny.Circle(t,i,e)),this},Tiny.Graphics.prototype.drawEllipse=function(t,i,e,n){return this.drawShape(new Tiny.Ellipse(t,i,e,n)),this},Tiny.Graphics.prototype.drawPolygon=function(t){var i=t;if(!Array.isArray(i)){i=new Array(arguments.length);for(var e=0;e<i.length;++e)i[e]=arguments[e]}return this.drawShape(new Phaser.Polygon(i)),this},Tiny.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},Tiny.Graphics.prototype.generateTexture=function(t,i){t=t||1;var e=this.getBounds(),n=new PIXI.CanvasBuffer(e.width*t,e.height*t),s=Tiny.Texture.fromCanvas(n.canvas,i);return s.baseTexture.resolution=t,n.context.scale(t,t),n.context.translate(-e.x,-e.y),Tiny.CanvasGraphics.renderGraphics(this,n.context),s},Tiny.Graphics.prototype._renderCanvas=function(t){if(!0!==this.isMask){if(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void Tiny.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var i=t.context,e=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=Tiny.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var n=t.resolution;i.setTransform(e.a*n,e.b*n,e.c*n,e.d*n,e.tx*n,e.ty*n),Tiny.CanvasGraphics.renderGraphics(this,i);for(var s=0;s<this.children.length;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},Tiny.Graphics.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return Tiny.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var i=this._localBounds,e=i.x,n=i.width+i.x,s=i.y,r=i.height+i.y,h=t||this.worldTransform,o=h.a,a=h.b,c=h.c,l=h.d,u=h.tx,d=h.ty,p=o*n+c*r+u,y=l*r+a*n+d,f=o*e+c*r+u,T=l*r+a*e+d,g=o*e+c*s+u,x=l*s+a*e+d,m=o*n+c*s+u,v=l*s+a*n+d,w=p,b=y,_=p,C=y;_=f<_?f:_,_=g<_?g:_,_=m<_?m:_,C=T<C?T:C,C=x<C?x:C,C=v<C?v:C,w=f>w?f:w,w=g>w?g:w,w=m>w?m:w,b=T>b?T:b,b=x>b?x:b,b=v>b?v:b,this._bounds.x=_,this._bounds.width=w-_,this._bounds.y=C,this._bounds.height=b-C,this._currentBounds=this._bounds}return this._currentBounds},Tiny.Graphics.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var i=this.graphicsData,e=0;e<i.length;e++){var n=i[e];if(n.fill&&(n.shape&&n.shape.contains(tempPoint.x,tempPoint.y)))return!0}return!1},Tiny.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-1/0,e=1/0,n=-1/0;if(this.graphicsData.length)for(var s,r,h,o,a,c,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],d=u.type,p=u.lineWidth;if(s=u.shape,d===Tiny.Graphics.RECT||d===Tiny.Graphics.RREC)h=s.x-p/2,o=s.y-p/2,a=s.width+p,c=s.height+p,t=h<t?h:t,i=h+a>i?h+a:i,e=o<e?o:e,n=o+c>n?o+c:n;else if(d===Tiny.Graphics.CIRC)h=s.x,o=s.y,a=s.radius+p/2,c=s.radius+p/2,t=h-a<t?h-a:t,i=h+a>i?h+a:i,e=o-c<e?o-c:e,n=o+c>n?o+c:n;else if(d===Tiny.Graphics.ELIP)h=s.x,o=s.y,a=s.width+p/2,c=s.height+p/2,t=h-a<t?h-a:t,i=h+a>i?h+a:i,e=o-c<e?o-c:e,n=o+c>n?o+c:n;else{r=s.points;for(var y=0;y<r.length;y++)r[y]instanceof Phaser.Point?(h=r[y].x,o=r[y].y):(h=r[y],o=r[y+1],y<r.length-1&&y++),t=h-p<t?h-p:t,i=h+p>i?h+p:i,e=o-p<e?o-p:e,n=o+p>n?o+p:n}}else t=0,i=0,e=0,n=0;var f=this.boundsPadding;this._localBounds.x=t-f,this._localBounds.width=i-t+2*f,this._localBounds.y=e-f,this._localBounds.height=n-e+2*f},Tiny.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var i=new PIXI.CanvasBuffer(t.width,t.height),e=Tiny.Texture.fromCanvas(i.canvas);this._cachedSprite=new Tiny.Sprite(e),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,Tiny.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},Tiny.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,i=t.texture,e=t.buffer.canvas;i.baseTexture.width=e.width,i.baseTexture.height=e.height,i.crop.width=i.frame.width=e.width,i.crop.height=i.frame.height=e.height,t._width=e.width,t._height=e.height,i.baseTexture.dirty()},Tiny.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},Tiny.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,t instanceof Tiny.Polygon&&t.flatten();var i=new Tiny.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(i),i.type===Tiny.Graphics.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this.dirty=!0,i},Object.defineProperty(Tiny.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}})},function(t,i){Tiny.Sprite=function(t){Tiny.DisplayObjectContainer.call(this),this.anchor=new Tiny.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=Tiny.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.getBounds=function(t){var i=this.texture.frame.width,e=this.texture.frame.height,n=i*(1-this.anchor.x),s=i*-this.anchor.x,r=e*(1-this.anchor.y),h=e*-this.anchor.y,o=t||this.worldTransform,a=o.a,c=o.b,l=o.c,u=o.d,d=o.tx,p=o.ty,y=-1/0,f=-1/0,T=1/0,g=1/0;if(0===c&&0===l)a<0&&(a*=-1),u<0&&(u*=-1),T=a*s+d,y=a*n+d,g=u*h+p,f=u*r+p;else{var x=a*s+l*h+d,m=u*h+c*s+p,v=a*n+l*h+d,w=u*h+c*n+p,b=a*n+l*r+d,_=u*r+c*n+p,C=a*s+l*r+d,P=u*r+c*s+p;T=x<T?x:T,T=v<T?v:T,T=b<T?b:T,T=C<T?C:T,g=m<g?m:g,g=w<g?w:g,g=_<g?_:g,g=P<g?P:g,y=x>y?x:y,y=v>y?v:y,y=b>y?b:y,y=C>y?C:y,f=m>f?m:f,f=w>f?w:f,f=_>f?_:f,f=P>f?P:f}var S=this._bounds;return S.x=T,S.width=y-T,S.y=g,S.height=f-g,this._currentBounds=S,S},Tiny.Sprite.prototype._renderCanvas=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=Tiny.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var i=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=0===t.scaleMode);var e=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),e|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)}for(var s=0;s<this.children.length;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,Tiny.Sprite.call(this,Tiny.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},Tiny.Text.prototype=Object.create(Tiny.Sprite.prototype),Tiny.Text.prototype.constructor=Tiny.Text,Object.defineProperty(Tiny.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},Tiny.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},Tiny.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var i=t.split(/(?:\r\n|\r|\n)/),e=[],n=0,s=this.determineFontProperties(this.style.font),r=0;r<i.length;r++){var h=this.context.measureText(i[r]).width;e[r]=h,n=Math.max(n,h)}var o=n+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var a=s.fontSize+this.style.strokeThickness,c=a*i.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var l,u;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(r=0;r<i.length;r++)l=this.style.strokeThickness/2,u=this.style.strokeThickness/2+r*a+s.ascent,"right"===this.style.align?l+=n-e[r]:"center"===this.style.align&&(l+=(n-e[r])/2),this.style.fill&&this.context.fillText(i[r],l+d,u+p)}for(this.context.fillStyle=this.style.fill,r=0;r<i.length;r++)l=this.style.strokeThickness/2,u=this.style.strokeThickness/2+r*a+s.ascent,"right"===this.style.align?l+=n-e[r]:"center"===this.style.align&&(l+=(n-e[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(i[r],l,u),this.style.fill&&this.context.fillText(i[r],l,u);this.updateTexture()},Tiny.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},Tiny.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),Tiny.Sprite.prototype._renderCanvas.call(this,t)},Tiny.Text.prototype.determineFontProperties=function(t){var i=Tiny.Text.fontPropertiesCache[t];if(!i){i={};var e=Tiny.Text.fontPropertiesCanvas,n=Tiny.Text.fontPropertiesContext;n.font=t;var s=Math.ceil(n.measureText("|Mq").width),r=Math.ceil(n.measureText("|Mq").width),h=2*r;r=1.4*r|0,e.width=s,e.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,r);var o,a,c=n.getImageData(0,0,s,h).data,l=c.length,u=4*s,d=0,p=!1;for(o=0;o<r;o++){for(a=0;a<u;a+=4)if(255!==c[d+a]){p=!0;break}if(p)break;d+=u}for(i.ascent=r-o,d=l-u,p=!1,o=h;o>r;o--){for(a=0;a<u;a+=4)if(255!==c[d+a]){p=!0;break}if(p)break;d-=u}i.descent=o-r,i.descent+=6,i.fontSize=i.ascent+i.descent,Tiny.Text.fontPropertiesCache[t]=i}return i},Tiny.Text.prototype.wordWrap=function(t){for(var i="",e=t.split("\n"),n=0;n<e.length;n++){for(var s=this.style.wordWrapWidth,r=e[n].split(" "),h=0;h<r.length;h++){var o=this.context.measureText(r[h]).width,a=o+this.context.measureText(" ").width;0===h||a>s?(h>0&&(i+="\n"),i+=r[h],s=this.style.wordWrapWidth-o):(s-=a,i+=" "+r[h])}n<e.length-1&&(i+="\n")}return i},Tiny.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.getBounds.call(this,t)},Tiny.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t||t)},Tiny.Text.fontPropertiesCache={},Tiny.Text.fontPropertiesCanvas=document.createElement("canvas"),Tiny.Text.fontPropertiesContext=Tiny.Text.fontPropertiesCanvas.getContext("2d")},function(t,i){Tiny.BaseTextureCache={},Tiny.BaseTextureCacheIdGenerator=0,Tiny.BaseTexture=function(t,i){this.resolution=1,this.width=100,this.height=100,this.scaleMode=i||Tiny.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=Tiny._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],t&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.imageUrl=null,this._powerOf2=!1)},Tiny.BaseTexture.prototype.constructor=Tiny.BaseTexture,Tiny.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete Tiny.BaseTextureCache[this.imageUrl],delete Tiny.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete Tiny.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},Tiny.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},Tiny.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},Tiny.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var i=this._glTextures[t],e=Tiny.glContexts[t];e&&i&&e.deleteTexture(i)}this._glTextures.length=0,this.dirty()},Tiny.BaseTexture.fromImage=function(t,i,e){var n=Tiny.BaseTextureCache[t];if(void 0===i&&-1===t.indexOf("data:")&&(i=!0),!n){var s=new Image;i&&(s.crossOrigin=""),s.src=t,n=new Tiny.BaseTexture(s,e),n.imageUrl=t,Tiny.BaseTextureCache[t]=n,-1!==t.indexOf(Tiny.RETINA_PREFIX+".")&&(n.resolution=2)}return n},Tiny.BaseTexture.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+Tiny.TextureCacheIdGenerator++);var e=Tiny.BaseTextureCache[t._pixiId];return e||(e=new Tiny.BaseTexture(t,i),Tiny.BaseTextureCache[t._pixiId]=e),e}},function(t,i){Tiny.TextureCache={},Tiny.FrameCache={},Tiny.TextureSilentFail=!1,Tiny.TextureCacheIdGenerator=0,Tiny.Texture=function(t,i,e,n){this.noFrame=!1,i||(this.noFrame=!0,i=new Tiny.Rectangle(0,0,1,1)),t instanceof Tiny.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=i,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=e||new Tiny.Rectangle(0,0,1,1),t.hasLoaded&&(this.noFrame&&(i=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(i))},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)){if(!Tiny.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);return void(this.valid=!1)}this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},Tiny.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new Tiny.TextureUvs);var t=this.crop,i=this.baseTexture.width,e=this.baseTexture.height;this._uvs.x0=t.x/i,this._uvs.y0=t.y/e,this._uvs.x1=(t.x+t.width)/i,this._uvs.y1=t.y/e,this._uvs.x2=(t.x+t.width)/i,this._uvs.y2=(t.y+t.height)/e,this._uvs.x3=t.x/i,this._uvs.y3=(t.y+t.height)/e},Tiny.Texture.fromImage=function(t,i,e){var n=Tiny.TextureCache[t];return n||(n=new Tiny.Texture(Tiny.BaseTexture.fromImage(t,i,e)),Tiny.TextureCache[t]=n),n},Tiny.Texture.fromFrame=function(t){var i=Tiny.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return i},Tiny.Texture.fromCanvas=function(t,i){var e=Tiny.BaseTexture.fromCanvas(t,i);return new Tiny.Texture(e)},Tiny.Texture.addTextureToCache=function(t,i){Tiny.TextureCache[i]=t},Tiny.Texture.removeTextureFromCache=function(t){var i=Tiny.TextureCache[t];return delete Tiny.TextureCache[t],delete Tiny.BaseTextureCache[t],i},Tiny.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}},function(t,i){Tiny.CanvasMaskManager=function(){},Tiny.CanvasMaskManager.prototype.constructor=Tiny.CanvasMaskManager,Tiny.CanvasMaskManager.prototype.pushMask=function(t,i){var e=i.context;e.save();var n=t.alpha,s=t.worldTransform,r=i.resolution;e.setTransform(s.a*r,s.b*r,s.c*r,s.d*r,s.tx*r,s.ty*r),Tiny.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},Tiny.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()}},function(t,i){Date.now||(Date.now=function(){return(new Date).getTime()})},function(t,i,e){e(20),e(1),e(6),e(8),e(10),e(9),e(12),e(13),e(11),e(7),e(17),e(18),e(2),e(19),e(3),e(4),e(5),e(15),e(14),e(16),e(0)},function(t,i){var e={};e.maxConcurrency=1/0,e.assetProgress={},e.loadedAssets={},e.queue=[],e.queueIdx=0,e.loader={},e.load=function(t){e.asyncQueue(e.queue,function(){e.queue=[],e.assetProgress={},"function"==typeof t&&t()})},e.queueNext=function(){e.queueIdx++},e.loadingCallback=function(){},e.done=function(t,i){e.loadedAssets[t]=i,e.updateAssetProgress(t,1,1),e.loadingCallback(t,i)},e.push=function(t){void 0===e.queue[e.queueIdx]&&(e.queue[e.queueIdx]=[]),e.queue[e.queueIdx].push(t)},e.progressListener=null,e.getProgress=function(){if(e.queue.length<=0)return 1;var t=0;Object.keys(e.assetProgress).forEach(function(i){t+=e.assetProgress[i]});var i=0;return e.queue.forEach(function(t){i+=t.length}),t/i},e.updateAssetProgress=function(t,i,n){if(!(1===e.assetProgress[t]||n<i||n<=0)){var s=1;void 0!==i&&void 0!==n&&(s=i/n),e.assetProgress[t]=s,"function"==typeof e.progressListener&&e.progressListener(e.getProgress())}},e.getAssetById=function(t){return e.loadedAssets[t]},e.asyncQueue=function(t,i){if(0==t.length)return i();var n=t.slice(),s=function(){var t=n.shift();e.asyncCollection(t,function(){n.length>0?s():i()})};s()},e.asyncCollection=function(t,i){var t=t.slice(),n=Math.min(e.maxConcurrency,t.length),s=function(e){e(function(){n--,t.length>0?(n++,s(t.shift())):0===n&&i()})};t.splice(0,e.maxConcurrency).forEach(s)},e.add=function(t,i){var n=i.split(".").pop();if("png"===n)e.add.image(t,i);else if("json"===n)e.add.json(t,i);else{if("css"!==n)throw new Error("Unsupported file-type ("+n+") passed to AssetLoader.add.");e.add.css(t,i)}},e.add.image=function(t,i){e.push(function(n){var s=new Image;s.onload=function(){e.done(t,s),e.updateAssetProgress(i,1,1),n()},s.src=i})},e.add.webFont=function(t,i,n){e.add.css(t,n);var s=document.createElement("div");s.innerText="Loading "+i,s.style.fontFamily=i,s.style.width=0,s.style.height=0,s.style.overflow="hidden",document.body.appendChild(s)},e.add.json=function(t,i){e.push(function(n){s(i,function(i){e.done(t,i),n()})})},e.add.script=function(t,i){e.push(function(n){e.loader.script(i,function(){e.done(t,i),n()})})},e.loader.script=function(t,i,e){var n=document.createElement("script");n.src=i,n.id=t,n.onload=e,document.head.appendChild(n)},e.add.css=function(t,i){e.push(function(n){var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=i,s.onload=function(){e.done(t,s),n()},document.head.appendChild(s)})};var n=function(t,i){var n=new XMLHttpRequest;n.open("GET",t,!0);var s=function(){4===n.readyState&&(i(n.response||n.responseText),n.onload=null,n.onreadystatechange=null)};n.onload=s,n.onreadystatechange=s,n.onprogress=function(i){e.updateAssetProgress(t,i.loaded,i.total)},n.onerror=function(t){throw new Error("Error during XHR: "+t)},n.send()},s=function(t,i){n(t,function(t){i(JSON.parse(t))})};t.exports=e,window.AssetLoader=e},function(t,i,e){e(22);var n=function(t){this.game=t,AssetLoader.loadingCallback=function(i,e){var n=new Tiny.BaseTexture(e);t.textures[i]=new Tiny.Texture(n)},Object.defineProperty(this.game,"cache",{get:function(){return AssetLoader.loadedAssets}})};n.prototype={image:function(t,i){AssetLoader.add.image(t,i)},start:function(t){AssetLoader.load(function(){t.call(this)}.bind(this.game))}},t.exports=n},function(t,i){var e=function(t){this.game=t};e.prototype={sprite:function(t,i,e,n,s){var r=new Tiny.Sprite(this.game.textures[e]);return this.game.stage.addChild(r),r.x=t||0,r.y=i||0,r},text:function(t,i,e,n){var e=new Tiny.Text(e,n);return this.game.stage.addChild(e),e.x=t||0,e.y=i||0,e},graphics:function(t,i){var e=new Tiny.Graphics;return this.game.stage.addChild(e),e.x=t||0,e.y=i||0,e}},t.exports=e},,function(t,i){var e=function(t,i){void 0===i&&(i=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=i;for(var e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null};e.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(i){return t.updateRAF(i)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(t){this.isRunning&&(this.game.update(Math.floor(t)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},t.exports=e},function(t,i){var e=function(t){this.game=t,this.listeners=[],window.addEventListener("touchend",this.clickHandler.bind(this)),/firefox/i.test(navigator.userAgent)?window.addEventListener("click",this.clickHandler.bind(this)):window.addEventListener("mousedown",this.clickHandler.bind(this))},n=function(t,i,e,n,s,r){return t>=e&&t<=e+s&&i>=n&&i<=n+r};e.prototype={clickHandler:function(t){var i=null;if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent?(this.listeningToTouchEvents=!0,t.touches.length>0?i={x:t.touches[0].pageX,y:t.touches[0].pageY}:t.pageX&&t.pageY?i={x:t.pageX,y:t.pageY}:this.listeningToTouchEvents=!1):i={x:t.pageX,y:t.pageY},!(this.listeningToTouchEvents&&t instanceof MouseEvent||null===i)){var e=[];this.listeners.forEach(function(t){if(t.inputEnabled){console.log(i);var s=t.getBounds();n(i.x,i.y,s.x,s.y,s.width,s.height)&&e.push(t.onClick)}}),e.forEach(function(t){"function"==typeof t&&t()})}},windowToUISpace:function(t,i){var e=this.game.canvas.getBoundingClientRect(),n=this.game.height/e.height;return{x:(t-e.left)*n,y:(i-e.top)*n}},appendListener:function(t){-1==this.listeners.indexOf(t)&&this.listeners.push(t)}},t.exports=e}]);