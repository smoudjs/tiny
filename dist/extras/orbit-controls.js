!function(){"use strict";var e=Tiny.Vec3,t=Tiny.Vec2,a=-1,i=0,n=1,o=2,s=3,r=new e,u=new t,h=new t;Tiny.OrbitControls=function(c){var d=this,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=p.element,l=void 0===v?document:v,m=p.enabled,f=void 0===m||m,g=p.target,y=void 0===g?new e:g,M=p.ease,w=void 0===M?.25:M,b=p.inertia,x=void 0===b?.85:b,E=p.enableRotate,L=void 0===E||E,Y=p.rotateSpeed,X=void 0===Y?.1:Y,P=p.autoRotate,k=void 0!==P&&P,A=p.autoRotateSpeed,D=void 0===A?1:A,z=p.enableZoom,S=void 0===z||z,I=p.zoomSpeed,O=void 0===I?1:I,B=p.zoomStyle,V=void 0===B?'dolly':B,R=p.enablePan,T=void 0===R||R,H=p.panSpeed,Z=void 0===H?.1:H,q=p.minPolarAngle,N=void 0===q?0:q,j=p.maxPolarAngle,C=void 0===j?Math.PI:j,F=p.minAzimuthAngle,G=void 0===F?-1/0:F,J=p.maxAzimuthAngle,K=void 0===J?1/0:J,Q=p.minDistance,U=void 0===Q?0:Q,W=p.maxDistance,$=void 0===W?1/0:W;this.enabled=f,this.target=y,this.zoomStyle=V,w=w||1,x=x||0,this.minDistance=U,this.maxDistance=$;var _={radius:1,phi:0,theta:0},ee={radius:1,phi:0,theta:0},te={radius:1,phi:0,theta:0},ae=new e,ie=new e;ie.copy(c.position).subVectors(ie,this.target),te.radius=ee.radius=ie.length(),te.theta=ee.theta=Math.atan2(ie.x,ie.z),te.phi=ee.phi=Math.acos(Math.min(Math.max(ie.y/ee.radius,-1),1)),this.offset=ie,this.update=function(){var e;k&&(e=2*Math.PI/60/60*D,_.theta-=e),ee.radius*=_.radius,ee.theta+=_.theta,ee.phi+=_.phi,ee.theta=Math.max(G,Math.min(K,ee.theta)),ee.phi=Math.max(N,Math.min(C,ee.phi)),ee.radius=Math.max(d.minDistance,Math.min(d.maxDistance,ee.radius)),te.phi+=(ee.phi-te.phi)*w,te.theta+=(ee.theta-te.theta)*w,te.radius+=(ee.radius-te.radius)*w,d.target.add(ae);var t=te.radius*Math.sin(Math.max(1e-6,te.phi));ie.x=t*Math.sin(te.theta),ie.y=te.radius*Math.cos(te.phi),ie.z=t*Math.cos(te.theta),c.position.copy(d.target).add(ie),c.lookAt(d.target),c.updateProjectionMatrix(),_.theta*=x,_.phi*=x,ae.multiplyScalar(x),_.radius=1},this.forcePosition=function(){ie.copy(c.position).sub(d.target),te.radius=ee.radius=ie.distance(),te.theta=ee.theta=Math.atan2(ie.x,ie.z),te.phi=ee.phi=Math.acos(Math.min(Math.max(ie.y/ee.radius,-1),1)),c.lookAt(d.target)};var ne=new t,oe=new t,se=new t,re=a;function ue(){return Math.pow(.95,O)}this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};var he=function(e,t){var a=l===document?document.body:l;r.copy(c.position).sub(d.target);var i,n,o=r.length();o*=Math.tan((c.fov||45)/2*Math.PI/180),i=2*e*o/a.clientHeight,n=c.matrix,r.set(n[0],n[1],n[2]),r.multiply(-i),ae.add(r),function(e,t){r.set(t[4],t[5],t[6]),r.multiply(e),ae.add(r)}(2*t*o/a.clientHeight,c.matrix)},ce=function(e){'dolly'===d.zoomStyle?_.radius/=e:(c.fov/=e,'orthographic'===c.type?c.orthographic():c.perspective())};function de(e,t){u.set(e,t),h.subVectors(u,ne).multiplyScalar(X);var a=l===document?document.body:l;_.theta-=2*Math.PI*h.x/a.clientHeight,_.phi-=2*Math.PI*h.y/a.clientHeight,ne.copy(u)}function pe(e,t){u.set(e,t),h.subVectors(u,oe).multiply(Z),he(h.x,h.y),oe.copy(u)}var ve=function(e){if(d.enabled){switch(e.button){case d.mouseButtons.ORBIT:if(!1===L)return;ne.set(e.clientX,e.clientY),re=i;break;case d.mouseButtons.ZOOM:if(!1===S)return;se.set(e.clientX,e.clientY),re=n;break;case d.mouseButtons.PAN:if(!1===T)return;oe.set(e.clientX,e.clientY),re=o}re!==a&&(window.addEventListener('mousemove',le,!1),window.addEventListener('mouseup',me,!1))}},le=function(e){if(d.enabled)switch(re){case i:if(!1===L)return;de(e.clientX,e.clientY);break;case n:if(!1===S)return;!function(e){u.set(e.clientX,e.clientY),h.subVectors(u,se),h.y>0?ce(ue()):h.y<0&&ce(1/ue()),se.copy(u)}(e);break;case o:if(!1===T)return;pe(e.clientX,e.clientY)}},me=function e(){window.removeEventListener('mousemove',le,!1),window.removeEventListener('mouseup',e,!1),re=a},fe=function(e){d.enabled&&S&&(re===a||re===i)&&(e.stopPropagation(),e.preventDefault(),e.deltaY<0?ce(1/ue()):e.deltaY>0&&ce(ue()))},ge=function(e){if(d.enabled)switch(e.preventDefault(),e.touches.length){case 1:if(!1===L)return;ne.set(e.touches[0].pageX,e.touches[0].pageY),re=i;break;case 2:if(!1===S&&!1===T)return;!function(e){if(S){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a);se.set(0,i)}if(T){var n=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);oe.set(n,o)}}(e),re=s;break;default:re=a}},ye=function(e){if(d.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===L)return;de(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!1===S&&!1===T)return;!function(e){if(S){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a);u.set(0,i),h.set(0,Math.pow(u.y/se.y,O)),ce(h.y),se.copy(u)}T&&pe(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY))}(e);break;default:re=a}},Me=function(){d.enabled&&(re=a)},we=function(e){d.enabled&&e.preventDefault()};this.remove=function(){l.removeEventListener('contextmenu',we),l.removeEventListener('mousedown',ve),l.removeEventListener('wheel',fe),l.removeEventListener('touchstart',ge),l.removeEventListener('touchend',Me),l.removeEventListener('touchmove',ye),window.removeEventListener('mousemove',le),window.removeEventListener('mouseup',me)},l.addEventListener('contextmenu',we,!1),l.addEventListener('mousedown',ve,!1),l.addEventListener('wheel',fe,{passive:!1}),l.addEventListener('touchstart',ge,{passive:!1}),l.addEventListener('touchend',Me,!1),l.addEventListener('touchmove',ye,{passive:!1})}}();