!function(){var t={548:function(){Tiny.SpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.base),t._uvs||(t._uvs=new Tiny.TextureUvs);var i=t._uvs;t.tilePosition.x%=e.base.width*t.tileScaleOffset.x,t.tilePosition.y%=e.base.height*t.tileScaleOffset.y;var s=t.tilePosition.x/(e.base.width*t.tileScaleOffset.x),h=t.tilePosition.y/(e.base.height*t.tileScaleOffset.y),r=t.width/e.base.width/(t.tileScale.x*t.tileScaleOffset.x),n=t.height/e.base.height/(t.tileScale.y*t.tileScaleOffset.y);i.x0=0-s,i.y0=0-h,i.x1=1*r-s,i.y1=0-h,i.x2=1*r-s,i.y2=1*n-h,i.x3=0-s,i.y3=1*n-h;var a=t.tint.int,l=(a>>16)+(65280&a)+((255&a)<<16)+(255*t.alpha<<24),o=this.positions,u=this.colors,c=t.width,x=t.height,g=t.anchor.x,f=t.anchor.y,d=c*(1-g),T=c*-g,p=x*(1-f),y=x*-f,w=4*this.currentBatchSize*this.vertSize,b=e.base.resolution,_=t.worldTransform,v=_.a/b,S=_.b/b,m=_.c/b,B=_.d/b,M=_.tx,O=_.ty;o[w++]=v*T+m*y+M,o[w++]=B*y+S*T+O,o[w++]=i.x0,o[w++]=i.y0,u[w++]=l,o[w++]=v*d+m*y+M,o[w++]=B*y+S*d+O,o[w++]=i.x1,o[w++]=i.y1,u[w++]=l,o[w++]=v*d+m*p+M,o[w++]=B*p+S*d+O,o[w++]=i.x2,o[w++]=i.y2,u[w++]=l,o[w++]=v*T+m*p+M,o[w++]=B*p+S*T+O,o[w++]=i.x3,o[w++]=i.y3,u[w++]=l,this.sprites[this.currentBatchSize++]=t}}},e={};function i(s){var h=e[s];if(void 0!==h)return h.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}!function(){"use strict";var t=function(t,e,i,s){Tiny.Sprite.call(this,t,e),this._width=i||100,this._height=s||100,this.tileScale=new Tiny.Vec2(1,1),this.tileScaleOffset=new Tiny.Vec2(1,1),this.tilePosition=new Tiny.Vec2(0,0)};(t.prototype=Object.create(Tiny.Sprite.prototype)).constructor=t,Object.defineProperty(t.prototype,'width',{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(t.prototype,'height',{get:function(){return this._height},set:function(t){this._height=t}}),Object.assign(t.prototype,{setTexture:function(t,e){var i=Tiny.Sprite.prototype.setTexture.call(this,t,e);this.refreshTexture=i},render:function(t){if(!1!==this.visible&&0!==this.alpha){var e,i;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.renderer.updateTexture(this.tilingTexture.base),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,i=this.children.length;e<i;e++)this.children[e].render(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},renderCanvas:function(t){if(!1!==this.visible&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),e.globalAlpha=this.worldAlpha;var i,s,h=this.worldTransform,r=t.resolution;if(e.setTransform(h.a*r,h.b*r,h.c*r,h.d*r,h.tx*r,h.ty*r),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.base.source,'repeat')}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]);var n=this.tilePosition,a=this.tileScale;for(n.x%=this.tilingTexture.base.width,n.y%=this.tilingTexture.base.height,e.scale(a.x,a.y),e.translate(n.x+this.anchor.x*-this._width,n.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-n.x,-n.y,this._width/a.x,this._height/a.y),e.scale(1/a.x,1/a.y),e.translate(-n.x+this.anchor.x*this._width,-n.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t),i=0,s=this.children.length;i<s;i++)this.children[i].renderCanvas(t)}},getBounds:function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),s=t*-this.anchor.x,h=e*(1-this.anchor.y),r=e*-this.anchor.y,n=this.worldTransform,a=n.a,l=n.b,o=n.c,u=n.d,c=n.tx,x=n.ty,g=a*s+o*r+c,f=u*r+l*s+x,d=a*i+o*r+c,T=u*r+l*i+x,p=a*i+o*h+c,y=u*h+l*i+x,w=a*s+o*h+c,b=u*h+l*s+x,_=-1/0,v=-1/0,S=1/0,m=1/0;S=w<(S=p<(S=d<(S=g<S?g:S)?d:S)?p:S)?w:S,m=b<(m=y<(m=T<(m=f<m?f:m)?T:m)?y:m)?b:m,_=w>(_=p>(_=d>(_=g>_?g:_)?d:_)?p:_)?w:_,v=b>(v=y>(v=T>(v=f>v?f:v)?T:v)?y:v)?b:v;var B=this._bounds;return B.x=S,B.width=_-S,B.y=m,B.height=v-m,this._currentBounds=B,B},generateTilingTexture:function(t){if(this.texture.base.valid){var e,i,s,h=this.originalTexture||this.texture,r=h.frame,n=r.width!==h.base.width||r.height!==h.base.height,a=!1;if(t?(e=Tiny.Math.getNextPow2(r.width),i=Tiny.Math.getNextPow2(r.height),(r.width!==e||r.height!==i||h.base.width!==e||h.base.height||i)&&(a=!0)):n&&(h.trim?(e=h.trim.width,i=h.trim.height):(e=r.width,i=r.height),a=!0),a)this.tilingTexture&&this.tilingTexture.isTiling?((s=this.tilingTexture.canvasBuffer).resize(e,i),this.tilingTexture.base.width=e,this.tilingTexture.base.height=i,this.tilingTexture.needsUpdate=!0):(s=new Tiny.CanvasBuffer(e,i),this.tilingTexture=new Tiny.Texture(s.canvas),this.tilingTexture.canvasBuffer=s,this.tilingTexture.isTiling=!0),s.context.drawImage(h.base.source,h.crop.x,h.crop.y,h.crop.width,h.crop.height,0,0,e,i),this.tileScaleOffset.x=r.width/e,this.tileScaleOffset.y=r.height/i;else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=h;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.base._powerOf2=!0}},destroy:function(){Tiny.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)}});i(548);Tiny.TilingSprite=t}()}();